{
  "metadata": {
    "version": "1.0",
    "date_creation": "2026-01-17",
    "description": "R√®gles compl√®tes d'orchestration des urgences - Toutes dur√©es en MINUTES",
    "unite_temps": "minutes"
  },
  
  "regles_priorite": {
    "description": "Hi√©rarchie de priorit√© avec exception temps d'attente",
    "niveaux": [
      {
        "niveau": 1,
        "gravite": "ROUGE",
        "description": "Vital + Urgent - TOUJOURS prioritaire",
        "couleur": "#FF0000",
        "emoji": "üî¥",
        "temps_consultation_min": 1,
        "temps_consultation_max": 5,
        "destination_prioritaire": "SOINS_CRITIQUES",
        "destinations_alternatives": ["CARDIOLOGIE", "PNEUMOLOGIE", "NEUROLOGIE", "selon pathologie"]
      },
      {
        "niveau": 2,
        "gravite": "JAUNE",
        "description": "Non vital mais urgent",
        "couleur": "#FFA500",
        "emoji": "üü°",
        "temps_consultation_min": 20,
        "temps_consultation_max": 40,
        "destinations": ["selon pathologie"]
      },
      {
        "niveau": 3,
        "gravite": "VERT",
        "description": "Non vital, non urgent",
        "couleur": "#00CC66",
        "emoji": "üü¢",
        "temps_consultation_min": 10,
        "temps_consultation_max": 25,
        "destinations": ["selon pathologie"]
      },
      {
        "niveau": 4,
        "gravite": "GRIS",
        "description": "Pas d'urgence - retour maison",
        "couleur": "#808080",
        "emoji": "‚ö™",
        "temps_consultation_min": 5,
        "temps_consultation_max": 15,
        "destination_unique": "MAISON"
      }
    ],
    
    "exception_temps_attente": {
      "active": true,
      "description": "Si VERT attend >360min (6h), il passe avant JAUNE mais JAMAIS avant ROUGE",
      "seuil_minutes": 360,
      "regles": [
        "ROUGE reste toujours priorit√© 1 (absolu)",
        "VERT >360min devient priorit√© 2",
        "JAUNE devient priorit√© 3",
        "VERT <360min reste priorit√© 4",
        "GRIS reste priorit√© 5"
      ]
    }
  },
  
  "algorithme_queue": {
    "description": "Algorithme de s√©lection du prochain patient",
    "ordre_normal": [
      "Tous les ROUGE (par ordre arriv√©e)",
      "Tous les JAUNE (par ordre arriv√©e)",
      "Tous les VERT (par ordre arriv√©e)",
      "Tous les GRIS (par ordre arriv√©e)"
    ],
    "ordre_avec_exception_360min": [
      "Tous les ROUGE (par ordre arriv√©e)",
      "VERT qui attendent >360min (par ordre arriv√©e)",
      "JAUNE (par ordre arriv√©e)",
      "VERT <360min (par ordre arriv√©e)",
      "GRIS (par ordre arriv√©e)"
    ],
    "criteres_tri": [
      "priorite_effective (avec exception si applicable)",
      "heure_arrivee (FIFO dans m√™me priorit√©)"
    ]
  },
  
  "personnel": {
    "docteur": {
      "nombre": 1,
      "localisation": "CONSULTATION",
      "type": "FIXE",
      "capacite": 1,
      "role": "consultation_medicale",
      "description": "M√©decin des urgences - 1 patient √† la fois"
    },
    
    "infirmieres": [
      {
        "id": "INF_A",
        "nom": "Infirmi√®re A - R√©ceptionniste",
        "type": "FIXE",
        "localisation": "TRIAGE",
        "roles": [
          "accueillir_patients",
          "evaluer_gravite",
          "assigner_salle_attente"
        ],
        "contraintes": [
          "NE_BOUGE_JAMAIS"
        ],
        "description": "Toujours au triage, ne se d√©place JAMAIS"
      },
      {
        "id": "INF_B",
        "nom": "Infirmi√®re B - Mobile",
        "type": "MOBILE",
        "localisation": "CIRCULATION",
        "roles": [
          "surveiller_salles_attente",
          "transporter_patients_vers_consultation"
        ],
        "temps_transport_consultation_min": 5,
        "contraintes": [
          "MAX_15MIN_SANS_SURVEILLANCE"
        ],
        "description": "Circule entre salles et consultation"
      },
      {
        "id": "INF_C",
        "nom": "Infirmi√®re C - Mobile",
        "type": "MOBILE",
        "localisation": "CIRCULATION",
        "roles": [
          "surveiller_salles_attente",
          "transporter_patients_vers_consultation"
        ],
        "temps_transport_consultation_min": 5,
        "contraintes": [
          "MAX_15MIN_SANS_SURVEILLANCE"
        ],
        "description": "Circule entre salles et consultation"
      }
    ],
    
    "aides_soignants": [
      {
        "id": "AS_1",
        "nom": "Aide-Soignant 1",
        "type": "MOBILE",
        "localisation": "CIRCULATION",
        "roles": [
          "surveiller_salles_attente (si infirmi√®re pas disponible)",
          "transporter_patients_consultation",
          "transporter_patients_unite"
        ],
        "temps_transport_consultation_min": 5,
        "temps_transport_unite_min": 45,
        "contraintes": [
          "MAX_15MIN_SANS_SURVEILLANCE (si aucune infirmi√®re disponible)",
          "MAX_60MIN_ABSENCE_TOTALE"
        ],
        "description": "Peut surveiller salles et transporter vers unit√©s"
      },
      {
        "id": "AS_2",
        "nom": "Aide-Soignant 2",
        "type": "MOBILE",
        "localisation": "CIRCULATION",
        "roles": [
          "surveiller_salles_attente (si infirmi√®re pas disponible)",
          "transporter_patients_consultation",
          "transporter_patients_unite"
        ],
        "temps_transport_consultation_min": 5,
        "temps_transport_unite_min": 45,
        "contraintes": [
          "MAX_15MIN_SANS_SURVEILLANCE (si aucune infirmi√®re disponible)",
          "MAX_60MIN_ABSENCE_TOTALE"
        ],
        "description": "Peut surveiller salles et transporter vers unit√©s"
      }
    ]
  },
  
  "infrastructure": {
    "salles_attente": [
      {
        "numero": 1,
        "capacite": 5,
        "type": "ATTENTE",
        "contrainte_surveillance_max_min": 15,
        "description": "Salle d'attente 1 - 5 places"
      },
      {
        "numero": 2,
        "capacite": 10,
        "type": "ATTENTE",
        "contrainte_surveillance_max_min": 15,
        "description": "Salle d'attente 2 - 10 places"
      },
      {
        "numero": 3,
        "capacite": 5,
        "type": "ATTENTE",
        "contrainte_surveillance_max_min": 15,
        "description": "Salle d'attente 3 - 5 places"
      }
    ],
    "consultation": {
      "numero": 1,
      "capacite": 1,
      "type": "CONSULTATION",
      "description": "Salle de consultation unique - 1 patient √† la fois"
    },
    "capacite_totale_attente": 20
  },
  
  "unites_transfert": {
    "description": "Unit√©s hospitali√®res de destination apr√®s consultation",
    "regles_generales": [
      "Patient DOIT avoir vu m√©decin avant transfert",
      "Unit√© DOIT valider disponibilit√©",
      "GRIS ‚Üí MAISON automatique",
      "ROUGE ‚Üí SOINS_CRITIQUES imm√©diat OU unit√© sp√©cialis√©e selon pathologie"
    ],
    "unites": [
      {
        "nom": "CARDIOLOGIE",
        "capacite_initiale": 10,
        "specialites": ["cardiaque", "thoracique", "cardiovasculaire", "infarctus"],
        "temps_transport_min": 45,
        "priorite": "normale"
      },
      {
        "nom": "PNEUMOLOGIE",
        "capacite_initiale": 8,
        "specialites": ["respiratoire", "pulmonaire", "pneumonie", "asthme"],
        "temps_transport_min": 45,
        "priorite": "normale"
      },
      {
        "nom": "NEUROLOGIE",
        "capacite_initiale": 6,
        "specialites": ["neurologique", "AVC", "epilepsie", "paralysie", "cerebral"],
        "temps_transport_min": 45,
        "priorite": "normale"
      },
      {
        "nom": "ORTHOP√âDIE",
        "capacite_initiale": 12,
        "specialites": ["fracture", "entorse", "traumatisme", "os", "articulation"],
        "temps_transport_min": 45,
        "priorite": "normale"
      },
      {
        "nom": "SOINS_CRITIQUES",
        "capacite_initiale": 5,
        "specialites": ["critique", "urgence_vitale", "reanimation", "detresse"],
        "temps_transport_min": 45,
        "priorite": "immediate",
        "description": "Unit√© de r√©animation pour cas critiques ROUGE"
      },
      {
        "nom": "MAISON",
        "capacite_initiale": 999999,
        "specialites": ["benin", "non_urgent", "administratif"],
        "temps_transport_min": 0,
        "priorite": "normale",
        "description": "Retour √† domicile pour patients GRIS"
      }
    ]
  },
  
  "contraintes_principales": {
    "avant_transfert": [
      "Patient DOIT avoir vu un m√©decin avant transfert vers unit√©",
      "Aide-soignant DOIT √™tre disponible pour transport (45min)"
    ],
    "surveillance_salles": [
      "Salle ne peut rester >15min sans surveillance",
      "Infirmi√®re mobile peut surveiller 1 salle √† la fois",
      "Aide-soignant peut surveiller si aucune infirmi√®re disponible",
      "Surveillance assur√©e par rotation personnel mobile"
    ],
    "transport": [
      "Transport vers consultation: 5min (infirmi√®re OU aide-soignant)",
      "Transport vers unit√©: 45min (aide-soignant UNIQUEMENT)",
      "Personnel en transport n'est pas disponible pour surveillance",
      "Planifier transports pour respecter contrainte 15min surveillance"
    ],
    "temps_personnel": [
      "Infirmi√®re mobile: ne peut laisser salle >15min sans surveillance",
      "Aide-soignant: ne peut s'absenter >60min total des salles d'attente",
      "Temps transport compte dans temps d'absence"
    ]
  },
  
  "regles_speciales": {
    "gris": {
      "description": "Patient GRIS retourne syst√©matiquement √† la maison",
      "consultation": "Consultation rapide 5-15min",
      "transfert": "MAISON (automatique)",
      "pas_d_unite": true
    },
    "rouge": {
      "description": "Patient ROUGE n√©cessite transfert imm√©diat apr√®s consultation rapide",
      "consultation": "Consultation ultra-rapide 1-5min",
      "transfert_prioritaire": "SOINS_CRITIQUES",
      "transfert_alternatif": "Unit√© sp√©cialis√©e selon pathologie si soins critiques pleins",
      "priorite_absolue": true
    },
    "exception_360min": {
      "description": "Patient VERT avec attente >360min (6h)",
      "action": "Passe avant JAUNE dans la file d'attente",
      "limite": "Passe JAMAIS avant ROUGE",
      "calcul": "Temps depuis arriv√©e dans salle d'attente"
    }
  },
  
  "metriques_pour_arima": {
    "description": "M√©triques √† logger pour mod√®le ARIMA de pr√©diction saturation",
    "metriques_temps_reel": {
      "taux_saturation_global": {
        "formule": "(patients_actuels / capacite_totale) * 100",
        "frequence_calcul_min": 1,
        "unite": "pourcentage"
      },
      "taux_saturation_par_salle": {
        "formule": "(patients_salle / capacite_salle) * 100",
        "frequence_calcul_min": 1,
        "unite": "pourcentage"
      },
      "flux_arrivee_patients": {
        "description": "Nombre patients accueillis par heure",
        "frequence_calcul_min": 60,
        "unite": "patients/heure"
      },
      "flux_sortie_patients": {
        "description": "Nombre patients transf√©r√©s par heure",
        "frequence_calcul_min": 60,
        "unite": "patients/heure"
      },
      "temps_attente_moyen_mobile": {
        "description": "Moyenne mobile temps d'attente sur derni√®re heure",
        "fenetre_min": 60,
        "unite": "minutes"
      }
    },
    "metriques_historiques": {
      "pic_charge": "Heure de pic de saturation",
      "duree_saturation": "Temps pass√© en saturation >80%",
      "violations_contraintes": "Nombre violations surveillance/absence",
      "temps_consultation_moyen_par_gravite": "Dur√©e moyenne par niveau"
    },
    "objectif_arima": "Pr√©dire taux de saturation √† t+30min, t+60min, t+120min"
  },
  
  "format_logs": {
    "description": "Structure des logs JSON pour historique et analyse",
    "structure_log_event": {
      "timestamp": "ISO 8601 format",
      "timestamp_unix": "Unix timestamp pour calculs",
      "event_type": "Type √©v√©nement (PATIENT_ACCUEILLI, CONSULTATION_DEMARREE, etc.)",
      "data": {
        "patient_id": "Identifiant unique patient",
        "gravite": "Niveau de gravit√©",
        "salle": "Num√©ro de salle si applicable",
        "duree": "Dur√©e si applicable",
        "unite_destination": "Unit√© de transfert si applicable",
        "metadata": "Donn√©es additionnelles sp√©cifiques √† l'√©v√©nement"
      },
      "metriques_instant": {
        "taux_saturation": "Taux au moment de l'√©v√©nement",
        "patients_attente": "Nombre patients en attente",
        "temps_attente_moyen": "Temps attente moyen actuel"
      }
    },
    "types_evenements": [
      "PATIENT_ACCUEILLI",
      "PATIENT_EN_ATTENTE",
      "CONSULTATION_DEMARREE",
      "CONSULTATION_TERMINEE",
      "PATIENT_TRANSFERE",
      "VIOLATION_CONTRAINTE_SURVEILLANCE",
      "VIOLATION_CONTRAINTE_ABSENCE",
      "EXCEPTION_360MIN_ACTIVEE",
      "UNITE_SATUREE",
      "SALLE_PLEINE"
    ]
  }
}